import{r as p,c as i,o as g,w as B,d as D,i as I,b as P,h,F as A}from"./index-HZYHl-kQ.js";import{o as c,I as K,f as O,E as U,s as j,A as F,T as H,a as b}from"./keyboard-u6BdaseU.js";function M(e,a,l){let n=p(l==null?void 0:l.value),u=i(()=>e.value!==void 0);return[i(()=>u.value?e.value:n.value),function(s){return u.value||(n.value=s),a==null?void 0:a(s)}]}function k(e,a){if(e)return e;let l=a??"button";if(typeof l=="string"&&l.toLowerCase()==="button")return"button"}function R(e,a){let l=p(k(e.value.type,e.value.as));return g(()=>{l.value=k(e.value.type,e.value.as)}),B(()=>{var n;l.value||c(a)&&c(a)instanceof HTMLButtonElement&&!((n=c(a))!=null&&n.hasAttribute("type"))&&(l.value="button")}),l}function q(e){var a,l;let n=(a=e==null?void 0:e.form)!=null?a:e.closest("form");if(n){for(let u of n.elements)if(u!==e&&(u.tagName==="INPUT"&&u.type==="submit"||u.tagName==="BUTTON"&&u.type==="submit"||u.nodeName==="INPUT"&&u.type==="image")){u.click();return}(l=n.requestSubmit)==null||l.call(n)}}let G=Symbol("GroupContext"),Q=D({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:a,attrs:l,slots:n,expose:u}){var s;let C=(s=e.id)!=null?s:`headlessui-switch-${K()}`,r=I(G,null),[d,m]=M(i(()=>e.modelValue),t=>a("update:modelValue",t),i(()=>e.defaultChecked));function y(){m(!d.value)}let S=p(null),v=r===null?S:r.switchRef,w=R(i(()=>({as:e.as,type:l.type})),v);u({el:v,$el:v});function T(t){t.preventDefault(),y()}function $(t){t.key===b.Space?(t.preventDefault(),y()):t.key===b.Enter&&q(t.currentTarget)}function E(t){t.preventDefault()}let f=i(()=>{var t,o;return(o=(t=c(v))==null?void 0:t.closest)==null?void 0:o.call(t,"form")});return g(()=>{P([f],()=>{if(!f.value||e.defaultChecked===void 0)return;function t(){m(e.defaultChecked)}return f.value.addEventListener("reset",t),()=>{var o;(o=f.value)==null||o.removeEventListener("reset",t)}},{immediate:!0})}),()=>{let{name:t,value:o,form:x,...N}=e,L={checked:d.value},V={id:C,ref:v,role:"switch",type:w.value,tabIndex:0,"aria-checked":d.value,"aria-labelledby":r==null?void 0:r.labelledby.value,"aria-describedby":r==null?void 0:r.describedby.value,onClick:T,onKeyup:$,onKeypress:E};return h(A,[t!=null&&d.value!=null?h(O,U({features:j.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:d.value,form:x,name:t,value:o})):null,F({ourProps:V,theirProps:{...l,...H(N,["modelValue","defaultChecked"])},slot:L,attrs:l,slots:n,name:"Switch"})])}}});export{Q as u};
